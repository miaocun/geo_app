{% extends 'base.html' %}

{% block title %}地理情報検索{% endblock %}

{% block content %}
{% load bootstrap %}


<nav class="navbar navbar-expand navbar-dark bg-info">
    <ul class="navbar-nav">
        <li class="nav-item"><h5 class="nav-link"  style="color:yellow">地理情報検索フォーム</h5></li>
        <li class="nav-item"><a href="{% url 'locality'%}" class="nav-link"  style="color:yellow">地理情報トップ画面</a></li>             
    </ul>
</nav>

<table>
    <form action="{% url 'locality_find' %}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{form|bootstrap}}
    <tr><td></td><td align="left"><button type="submit" class="btn btn-primary btn-lg">検索</button></td></tr>
    </form>
</table>
<h7><a href="{% url 'locality_find'%}">検索に戻る</a></h7>
<hr>
<div class="table-responsive">
    <table class="table table-warning table-bordered table-hover text-nowrap">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>産地国</th>
                <th>地質帯</th>
                <th>採集地</th>
                <th>経度</th>
                <th>緯度</th>
                <th>写真</th>
                <th></th>
                <th></th>
            </tr>
    {% for item in data %}
        <tr>    
            <td>{{item.sample.id}}</td>
            <td>{{item.country}}</td>
            <td>{{item.terrane}}</td>
            <td>{{item.locality}}</td>
            <td>{% if item.N == True %} N {% endif %}
                {% if item.N == False %} S {% endif %}{{item.lat}}</td>
            <td>{% if item.E == True %} E {% endif %}
                {% if item.E == False %} W {% endif %}{{item.lon}}</td>
            <td>
                <form  action="{% url 'photoupload' %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <p><input type="file" name="upfile"/>{{position.photo}}</p>
                    <p><input type="submit" name="btn_upload" value="保存"/></p>
                </form>
            </td>
            <td><a href="{% url 'locality_edit' item.id %}">Edit</a></td>
            <td><a href="{% url 'locality_delete' item.id %}">Delete</a></td>
        </tr>
    {% endfor %}
    </table>
</div>

{% if positions.has_previous %}
<a href="?page={{ positions.previous_page_number }}">&lt; 前のページ</a>
{% else %}
<span>&lt; 前のページ</span>
{% endif %}

{{ positions.number }}ページ

{% if positions.has_next %}
<a href="?page={{ positions.next_page_number }}">次のページ &gt;</a>
{% else %}
<span>次のページ &gt;</span>
{% endif %}

{% endblock %}
